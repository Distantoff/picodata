# Пример работы с кластером Picodata
В данном разделе приведены примеры команд для работы с данными в Picodata.


## Создание спейса
Перед тем как начать пользоваться СУБД, необходимо создать спейс, т.е.
пространство хранения данных. В терминологии Tarantool спейс аналогичен
таблицам в других реляционных СУБД. 

После подключения к инстансу кластера посредством команды `picodata
connect`, начальным действием в пустом кластере будет создание первого
спейса. Пусть это будет шаблон списка друзей Свинки Пеппы, в
котором будет два поля: идентификатор записи и имя друга:

```lua
pico.create_space({
    name = 'friends_of_peppa',
    format = {
        {name = 'id', type = 'unsigned', is_nullable = false},
        {name = 'name', type = 'string', is_nullable = false},
    },
    primary_key = {'id'},
    distribution = 'global',
    timeout = 3,
})
```

Ключ _distribution_ отвечает за тип спейса. В примере указан глобальный
тип (_global_); также поддерживаются шардированные спейсы (следует
указать тип _sharded_). Значение “3.0” означает таймаут в секундах перед
возвращением управления пользователю (т.к. действие производится на всем
кластере, оно может занять продолжительное время). Для ключа `type`
допустимы те же типы полей, что и в `space_object:format()` в Tarantool
([подробнее](https://www.tarantool.io/ru/doc/latest/reference/reference_lua/box_space/format/)).  

Спейс является необходимым элементом схемы данных, распространяемой на
все узлы кластера. Каждое действие по созданию/удалению спейсов в
Picodata увеличивает номер схемы данных. В пустом кластере изначально
схема данных имеет индекс 0, после чего он инкрементируется при каждом
изменении содержимого кластера. Любое действие по
созданию/изменению/удалению спейсов, работы с индексами хранения и т.д.
является изменением схемы данных. 


## Запись данных в спейс
Запись данных, т.е. вставка строк, в спейс происходит с помощью следующей команды:
```lua
pico.cas(
  {space = 'friends_of_peppa', kind = 'insert', tuple = {1, "Suzy"} },
  {index = box.space._raft_state:get('applied').value, 
  term = box.space._raft_state:get('term').value, ranges = {} }
  )
```


## Чтение данных
Для чтения данных из спейса подойдёт команда:
```
box.space.friends_of_peppa:select()
```

Отдельно можно узнать, какие именно поля (названия столбцов) есть спейсе:
```
box.space.friends_of_peppa:format()
```

Приведенный выше пример поможет сделать первые шаги в работе с данными в Picodata.
Подробнее о внутренней архитектуре кластера Picodata см. в разделе
[Общая схема инициализации кластера](../clustering). 

Параметры запуска из командной строки описаны в разделе [Описание
параметров запуска](../cli).

---
[Исходный код страницы](https://git.picodata.io/picodata/picodata/docs/-/blob/main/docs/tutorial.md)

