# Работа с данными через SQL
В данном разделе приведены примеры команд для работы с данными в
Picodata с помощью языка [SQL-запросов](sql/queries.md). Этот способ относится к работе с
шардированными [спейсами](glossary.md#space). 


## Создание шардированного спейса

После подключения к инстансу кластера посредством команды `picodata
connect`, в интерактивной консоли Picodata доступна функция
`pico.sql()`, которая позволяет выполнять в кластере SQL-запросы. Данная
функция предназначена для работы именно с шардированными спейсами и
реализует возможности [распределенного SQL](../sql/review).

Для примера создадим шаблон списка друзей Свинки Пеппы, 
котором будет два поля: идентификатор записи и имя друга:

```sql
pico.sql([[
	create table "friends_of_peppa" (
    	        "id" integer,
                "name" text not null,
    	        primary key ("id")
	) using memtx distributed by ("id")
	option (timeout = 3.0)
]])
```

Помимо двух колонок, в примере указаны:

- первичный ключ таблицы;
- движок хранения данных in-memory (`memtx`);
- ключ шардирования таблицы
- таймаут перед возвращением управления пользователю.

Подробности использования SQL приведены в разделе [Команды SQL](sql/queries.md).

## Запись данных в шардированный спейс
Запись данных, т.е. вставка строк, в шардированный спейс происходит с помощью команды `INSERT` в SQL-запросе.
Можно использовать обычный запрос с прямой передачей значений:
 
```sql
pico.sql(
	[[insert into "friends_of_peppa" ("id", "name") values (?, ?)]], 
	{1, "Suzy"}
)
```

Либо параметризированный запрос:

```sql
pico.sql(
	[[insert into "friends_of_peppa" ("id", "name") values (1, "Suzy")]],{}
)
```
См. [подробнее](sql/queries.md#insert) о различиях в `INSERT`-запросах.

## Чтение данных из шардированного спейса
Для чтения всех данных из шардированного спейса подойдёт команда:

```
pico.sql([[select * from "friends_of_peppa"]], {})
```

Можно вывести отдельно строку по известному полю:

```
pico.sql([[select * from "friends_of_peppa" where "id" = 1]], {})
```

См. [подробнее](sql/queries.md#select) о вариантах чтения данных в SQL.

## Удаление данных

Удаление строки с известным `id`:

```sql
picodata> pico.sql([[delete from "friends_of_peppa" where "id" = 1]], {})
```

В консоли будет выведено количество удаленных строк (в данном случае, это `1`).

Приведенный выше пример поможет сделать первые шаги в работе с данными в Picodata.
Подробнее о внутренней архитектуре кластера Picodata см. в разделе
[Cхема инициализации кластера](../clustering). 

Параметры запуска из командной строки описаны в разделе [Аргументы командной строки Picodata](../cli).

---
[Исходный код страницы](https://git.picodata.io/picodata/picodata/docs/-/blob/main/docs/tutorial_sql.md)

