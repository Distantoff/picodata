# Работа с данными SQL
В данном разделе приведены примеры команд для работы с данными в
Picodata с помощью языка [SQL-запросов](sql/queries.md).

## Создание таблицы {: #creating-table }
После [подключения](tutorial_first_steps.md#accessing-console) к
инстансу кластера, в интерактивной консоли Picodata можно выполнять
SQL-запросы. Для этого можно использовать как напрямую язык SQL, так и
SQL-запросы, обернутые в синтаксис Lua. Переключение языков ввода и
особенности составления команд описаны в разделе [Команды
SQL](sql/queries.md#available_langs). Пользователям доступны функции для
работы как с глобальными, так и шардированными таблицами (в последнем
случае реализованы возможности [распределенного
SQL](sql/broadcasted_sql.md)).

Для примера создадим шаблон списка друзей Свинки Пеппы,
котором будет два поля: идентификатор записи и имя друга:

```sql
pico.sql([[
	create table "friends_of_peppa" (
    	        "id" integer,
                "name" text not null,
    	        primary key ("id")
	) using memtx distributed by ("id")
	option (timeout = 3.0)
]])
```

Помимо двух колонок, в примере указаны:

- первичный ключ таблицы (колонка `"id"`);
- [движок хранения данных](glossary.md#db-engine) in-memory (`memtx`);
- тип таблицы (шардированный, `distributed by`);
- ключ шардирования таблицы (колонка `"id"`);
- таймаут перед возвращением управления пользователю.

Для того чтобы создать такую же, но глобальную таблицу, следует указать
соответствующий тип:

```sql
pico.sql([[
	create table "friends_of_peppa" (
    	        "id" integer,
                "name" text not null,
    	        primary key ("id")
	) using memtx distributed globally
	option (timeout = 3.0)
]])
```

Подробнее о типах таблиц см. в [глоссарии](../glossary.md#table).
Описание команд SQL приведено в разделе [Команды SQL](sql/queries.md).

## Запись данных в таблицу {: #writing-to-table }
Запись данных, т.е. вставка строк, в таблицу происходит с помощью
команды `INSERT` в SQL-запросе. В данный момент поддерживается запись
только в шардированные таблицы. Можно использовать обычный запрос с
прямой передачей значений:

```sql
pico.sql(
	[[insert into "friends_of_peppa" ("id", "name") values (?, ?)]],
	{1, "Suzy"}
)
```

Либо параметризированный запрос:

```sql
pico.sql(
	[[insert into "friends_of_peppa" ("id", "name") values (1, "Suzy")]],{}
)
```
См. [подробнее](sql/queries.md#insert) о различиях в `INSERT`-запросах.

## Чтение данных из таблицы {: #reading-from-table }
Для чтения всех данных из таблицы подойдёт команда:

```
pico.sql([[select * from "friends_of_peppa"]], {})
```

Можно вывести отдельно строку по известному полю:

```
pico.sql([[select * from "friends_of_peppa" where "id" = 1]], {})
```

См. [подробнее](sql/queries.md#select) о вариантах чтения данных в SQL.

## Удаление данных {: #deleting-from-table }

Удаление строки с известным `id`:

```sql
picodata> pico.sql([[delete from "friends_of_peppa" where "id" = 1]], {})
```

В консоли будет выведено количество удаленных строк (в данном случае, это `1`).

Приведенный выше пример поможет сделать первые шаги в работе с данными в Picodata.
Подробнее о внутренней архитектуре кластера Picodata см. в разделе
[Жизненный цикл кластера](../clustering).

Параметры запуска из командной строки описаны в разделе [Аргументы командной строки Picodata](../cli).

---
[Исходный код страницы](https://git.picodata.io/picodata/picodata/docs/-/blob/main/docs/tutorial_data.md)

