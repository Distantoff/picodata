# Запуск Picodata

В данном разделе приведена информация по запуску отдельного инстанса
Picodata на физическом оборудовании или в виртуальной среде.

[Инстанс](../overview/glossary.md#instance) — экземпляр приложения
Picodata, из которых состоит кластер. Picodata может создать кластер,
состоящий всего из одного экземпляра/инстанса.

## Минимальный вариант запуска {: #simple_run }

В самом простом случае запуск инстанса сводится к выполнению команды
 `picodata run` без каких-либо параметров:

```shell
picodata run
```

Будет запущен кластер, состоящий из одного инстанса. Все параметры будут
стандартны, и, скорее всего, вы захотите их переопределить.

Читайте далее:

- [Подключение и работа в консоли](../tutorial/connecting.md)

## Запуск нескольких инстансов {: #run_multiple_instances }

Для того чтобы запустить несколько инстансов на одном сервере,
потребуется задать дополнительные параметры для каждого из них:

- рабочую директорию ([--data-dir])
- сетевой адрес ([--listen])
- адрес одного или нескольких соседних инстансов ([--peer])

Полный перечень возможных параметров запуска и их
описание содержатся в разделе [Аргументы командной строки], а также в
выводе команды `picodata run --help`.

[Аргументы командной строки]: ../reference/cli.md

Чтобы запустить два инстанса, которые объединятся в кластер,
выполните в двух соседних терминалах следующие команды:

```shell
picodata run --data-dir ./data/i1 --listen 127.0.0.1:3301
```

```shell
picodata run --data-dir ./data/i2 --listen 127.0.0.1:3302 --peer 127.0.0.1:3301
```

Обратите внимание на различия в запуске инстансов:

- каждый инстанс использует свою рабочую директорию и сетевой адрес
- в отсутствие параметра `--peer` запуск инстанса приводит к созданию
  нового кластера. Чтобы инстансы добавлялись в уже существующий кластер
  в этом параметре передается адрес первого инстанса

[--data-dir]: ../reference/cli.md#run_data_dir
[--listen]: ../reference/cli.md#run_listen
[--peer]: ../reference/cli.md#run_peer

Читайте далее:

- [Создание кластера](../tutorial/deploy.md)

## Безопасный запуск {: #secure_run }

<!-- WARNING: "‑" below are non-breaking hyphen &#8209; -->

Для обеспечения мер безопасности рекомендуется организовать хранение
пароля для внутреннего системного пользователя `pico_service` в
отдельном файле. При запуске инстанса путь к этому файлу передайте в
параметре [‑‑service‑password‑file][pwdfile].

Дополнительно, в опции [‑‑audit][audit] явно укажите указать способ
вывода [журнала аудита](../tutorial/audit_log.md).

Также рекомендуется использовать опцию [‑‑shredding][shredding], которая
обеспечивает безопасное удаление рабочих файлов.

Пример команд, реализующих безопасный запуск:

```shell
echo "shAreD_s3cr3t" > secret.txt
chmod 600 secret.txt
picodata run --service-password-file secret.txt --audit audit.log --shredding
```

[pwdfile]: ../reference/cli.md#run_service_password_file
[audit]: ../reference/cli.md#run_audit
[shredding]: ../reference/cli.md#run_shredding

## Безопасное завершение работы {: #secure_stop }

Для безопасного завершения работы инстанса нажмите сочетание
++ctrl+c++ в консоли, в которой он был запущен. После этого процесс
инстанса будет корректно завершен.
