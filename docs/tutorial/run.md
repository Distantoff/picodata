# Запуск Picodata

В данном разделе приведена информация по запуску отдельного инстанса
Picodata на физическом оборудовании или в виртуальной среде.

[Инстанс](../overview/glossary.md#instance) — экземпляр приложения
Picodata, из которых состоит кластер. Picodata может создать кластер,
состоящий всего из одного экземпляра/инстанса.

## Минимальный вариант запуска {: #simple_run }

Запуск инстанса сводится к выполнению команды `picodata run` с нужным
набором параметров. Полный перечень
возможных параметров запуска и их описание содержатся в разделе
[Аргументы командной строки Picodata](../reference/cli.md), а также в выводе команды
`picodata run --help`.

Обязательных параметров у исполняемого файла `picodata` нет, что позволяет
свести запуск к выполнению всего одной простой команды:

```shell
picodata run
```

Такой вариант предполагает целый ряд умолчаний, касающихся размещения
рабочих файлов инстанса, сетевых адресов, вывода диагностических
сообщений и т.д. В реальности, для решения практических задач, ряд
параметров запуска необходимо задать явным образом, см. [Создание
кластера](../tutorial/deploy.md)

## Несколько инстансов на одном сервере {: #single_server_run }

Если планируется запускать на одном сервере (вычислительном узле)
несколько инстансов Picodata, то необходимо определить каждому инстансу
его директорию (параметр `--data-dir`), в которой инстанс будет
размещать свои [рабочие
файлы](../architecture/instance_runtime_files.md) (иначе он будет
хранить их в текущей директории). Также нужно указать адрес и порт для
приема соединений (параметр `--listen`) в формате `<HOST>:<PORT>`. Если
для `--listen` указать только порт, то будет использован IP-адрес по
умолчанию (127.0.0.1):

```shell
picodata run --data-dir i1 --listen :3301
```
Соответственно, указанные параметры должны отличаться при запуске
нескольких инстансов. Например:

```shell
picodata run --data-dir i1 --listen :3301
picodata run --data-dir i2 --listen :3302
picodata run --data-dir i3 --listen :3303
```

Все корректно запущенные инстансы автоматически объединяются в один кластер.

## Безопасный запуск {: #secure_run }

<!-- WARNING: "‑" below are non-breaking hyphen &#8209; -->

Для обеспечения мер безопасности рекомендуется организовать хранение
пароля для внутреннего системного пользователя `pico_service` в
отдельном файле. При запуске инстанса путь к этому файлу следует
передать в параметре [‑‑service‑password‑file][pwdfile].

Дополнительно, в опции [‑‑audit][audit] следует явно указать способ
вывода [журнала аудита](../tutorial/audit_log.md).

Также рекомендуется использовать опцию [‑‑shredding][shredding], которая
обеспечивает безопасное удаление рабочих файлов, см. [Рабочие файлы
инстанса](../architecture/instance_runtime_files.md).

Пример команд, реализующих безопасный запуск:

```shell
echo "shAreD_s3cr3t" > secret.txt
chmod 600 secret.txt
picodata run --service-password-file secret.txt --audit audit.log --shredding
```

[pwdfile]: ../reference/cli.md#run_service_password_file
[audit]: ../reference/cli.md#run_audit
[shredding]: ../reference/cli.md#run_shredding

## Безопасное завершение работы {: #secure_stop }

Для безопасного завершения работы инстанса следует нажать сочетание
`Ctrl+C` в консоли, в которой он был запущен. После этого процесс
инстанса будет корректно завершен.

См. также:

- [Создание кластера](deploy.md)
- [Подключение и работа в консоли](connecting.md)
