# Подключение и работа в консоли
В данном разделе приведены сведения, которые помогут подключиться к
запущенному экземпляру Picodata и начать работу в консоли.


## Методы подключения {: #connection-methods }
### Подключение при запуске Picodata {: #accessing-console }

По умолчанию команда `picodata run` запускает инстанс, но не
предоставляет доступ к управлению им в консоли. Для подключения к
интерактивной Lua-консоли следует запускать инстанс с ключом `-i`
(`picodata run -i`). Встроенная консоль предоставляет привилегии уровня
администратора СУБД (`admin`) и разрешает все действия в рамках
локальной консоли. При этом, привилегия `SESSION`, позволяющая
подключаться к удаленным инстансам по сети, у локального администратора
отсутствует. Подробнее см. в разделе [Управление доступом](access_control.md).

### Подключение к ранее запущенному экземпляру {: #accessing-running-instace }
#### Подключение с помощью адреса экземпляра {: #picodata-connect }

```
picodata connect localhost:3301
```
По умолчанию, [подключение](../reference/cli.md#connect-command) производится под
пользователем `guest` без пароля. У такого пользователя имеется
единственная привилегия
[`SESSION`](access_control.md#privileges).

#### Подключение к консоли администратора {: #picodata-admin-console }
```
picodata admin /path/to/admin.sock
```

Юникс-сокет консоли администратора конфигурируется при запуске инстанса параметром [--admin-sock](../reference/cli.md#admin-sock).


В данном случае откроется консоль администратора (подключение с
правами пользователя `admin`).

#### Переключение языка консоли {: #switching-console-input-lang }
По умолчанию в административной консоли используется язык SQL. На данный момент через SQL
недоступен низкоуровневый Lua API для управления кластером.
Для переключения на язык Lua:
```
\set language lua
```
<!-- Для включения многострочного ввода на SQL следует задать разделитель команд (для примера указан символ `;`):

```
\set delimiter ;
```
-->

Для возврата к SQL:
```
\set language sql
```

## Рабочие файлы инстанса
В [директории с данными инстанса](../reference/cli.md#data-dir) автоматически появляются следующие файлы:

- `*.snap` — файлы [снапшотов](../overview/glossary.md#snapshot) БД
- `*.xlog` — файлы журнала упреждающей записи (Write-ahead log, WAL) c
  инкрементными изменениями БД
- `*.vylog` — также файлы с инкрементными изменениями БД, но для таблиц,
  использующих движок хранения [`vinyl`](../overview/glossary.md#db-engine).

При перезапуске инстанса эти файлы необходимы для восстановления его
состояния, обеспечивая [персистентное](../overview/glossary.md#persistence) хранение
данных.

Файлы снапшотов (`*.snap`) и журнала WAL (`*.xlog`/`*.vylog`) не
полностью взаимозаменяющие, так как, например, при аварийном завершении
инстанса часть записей может не попасть в последний снапшот, но при
этом попадет в файл журнала. В таком случае для полного восстановления
данных нужен будет и последний снапшот, и один или несколько файлов
журнала.

Параметры запуска из командной строки описаны в разделе [Аргументы командной строки](../reference/cli.md).
