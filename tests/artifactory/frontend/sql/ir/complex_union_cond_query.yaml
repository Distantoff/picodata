#
# SELECT *
# FROM
#   (
#     SELECT "identification_number", "product_code"
#       FROM "hash_testing"
#       WHERE "sys_op" = 1
#     UNION ALL
#     SELECT "identification_number", "product_code"
#     FROM "hash_testing_hist"
#     WHERE "sys_op" > 1
#    ) AS "t3"
# WHERE ("identification_number" = 1
#   OR ("identification_number" = 2
#     OR "identification_number" = 3))
#   AND ("product_code" = '1'
#     OR "product_code" = '2')
#
---
nodes:
  arena:
    - Expression:
        Reference:
          targets: ~
          position: 0
          parent: 0
    - Expression:
        Alias:
          name: identification_number
          child: 0
    - Expression:
        Reference:
          targets: ~
          position: 1
          parent: 0
    - Expression:
        Alias:
          name: product_code
          child: 2
    - Expression:
        Reference:
          targets: ~
          position: 2
          parent: 0
    - Expression:
        Alias:
          name: product_units
          child: 4
    - Expression:
        Reference:
          targets: ~
          position: 3
          parent: 0
    - Expression:
        Alias:
          name: sys_op
          child: 6
    - Expression:
        Reference:
          targets: ~
          position: 4
          parent: 0
    - Expression:
        Alias:
          name: bucket_id
          child: 8
    - Expression:
        Row:
          list:
            - 1
            - 3
            - 5
            - 7
            - 9
          distribution: ~
    - Relational:
        ScanRelation:
          output: 10
          id: 0
          relation: hash_testing
    - Expression:
        Reference:
          targets:
            - 0
          position: 3
          parent: 12
    - Expression:
        Row:
          list:
            - 12
          distribution: ~
    - Expression:
        Constant:
          value:
            Number: 1
    - Expression:
        Bool:
          left: 13
          op: Eq
          right: 14
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 12
    - Expression:
        Alias:
          name: identification_number
          child: 16
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 12
    - Expression:
        Alias:
          name: product_code
          child: 18
    - Expression:
        Reference:
          targets:
            - 0
          position: 2
          parent: 12
    - Expression:
        Alias:
          name: product_units
          child: 20
    - Expression:
        Reference:
          targets:
            - 0
          position: 3
          parent: 12
    - Expression:
        Alias:
          name: sys_op
          child: 22
    - Expression:
        Reference:
          targets:
            - 0
          position: 4
          parent: 12
    - Expression:
        Alias:
          name: bucket_id
          child: 24
    - Expression:
        Row:
          list:
            - 17
            - 19
            - 21
            - 23
            - 25
          distribution: ~
    - Relational:
        Selection:
          children:
            - 11
          filter: 15
          id: 12
          output: 26
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 28
    - Expression:
        Alias:
          name: identification_number
          child: 28
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 28
    - Expression:
        Alias:
          name: product_code
          child: 30
    - Expression:
        Row:
          list:
            - 29
            - 31
          distribution: ~
    - Relational:
        Projection:
          children:
            - 27
          id: 28
          output: 32
    - Expression:
        Reference:
          targets: ~
          position: 0
          parent: 34
    - Expression:
        Alias:
          name: identification_number
          child: 34
    - Expression:
        Reference:
          targets: ~
          position: 1
          parent: 34
    - Expression:
        Alias:
          name: product_code
          child: 36
    - Expression:
        Reference:
          targets: ~
          position: 2
          parent: 34
    - Expression:
        Alias:
          name: product_units
          child: 38
    - Expression:
        Reference:
          targets: ~
          position: 3
          parent: 34
    - Expression:
        Alias:
          name: sys_op
          child: 40
    - Expression:
        Reference:
          targets: ~
          position: 4
          parent: 34
    - Expression:
        Alias:
          name: bucket_id
          child: 42
    - Expression:
        Row:
          list:
            - 35
            - 37
            - 39
            - 41
            - 43
          distribution: ~
    - Relational:
        ScanRelation:
          output: 44
          id: 34
          relation: hash_testing_hist
    - Expression:
        Reference:
          targets:
            - 0
          position: 3
          parent: 46
    - Expression:
        Row:
          list:
            - 46
          distribution: ~
    - Expression:
        Constant:
          value:
            Number: 1
    - Expression:
        Bool:
          left: 47
          op: Gt
          right: 48
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 46
    - Expression:
        Alias:
          name: identification_number
          child: 50
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 46
    - Expression:
        Alias:
          name: product_code
          child: 52
    - Expression:
        Reference:
          targets:
            - 0
          position: 2
          parent: 46
    - Expression:
        Alias:
          name: product_units
          child: 54
    - Expression:
        Reference:
          targets:
            - 0
          position: 3
          parent: 46
    - Expression:
        Alias:
          name: sys_op
          child: 56
    - Expression:
        Reference:
          targets:
            - 0
          position: 4
          parent: 46
    - Expression:
        Alias:
          name: bucket_id
          child: 58
    - Expression:
        Row:
          list:
            - 51
            - 53
            - 55
            - 57
            - 59
          distribution: ~
    - Relational:
        Selection:
          children:
            - 45
          filter: 49
          id: 46
          output: 60
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 62
    - Expression:
        Alias:
          name: identification_number
          child: 62
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 62
    - Expression:
        Alias:
          name: product_code
          child: 64
    - Expression:
        Row:
          list:
            - 63
            - 65
          distribution: ~
    - Relational:
        Projection:
          children:
            - 61
          id: 62
          output: 66
    - Expression:
        Reference:
          targets:
            - 0
            - 1
          position: 0
          parent: 68
    - Expression:
        Alias:
          name: identification_number
          child: 68
    - Expression:
        Reference:
          targets:
            - 0
            - 1
          position: 1
          parent: 68
    - Expression:
        Alias:
          name: product_code
          child: 70
    - Expression:
        Row:
          list:
            - 69
            - 71
          distribution: ~
    - Relational:
        UnionAll:
          children:
            - 33
            - 67
          id: 68
          output: 72
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 74
    - Expression:
        Alias:
          name: identification_number
          child: 74
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 74
    - Expression:
        Alias:
          name: product_code
          child: 76
    - Expression:
        Row:
          list:
            - 75
            - 77
          distribution: ~
    - Relational:
        ScanSubQuery:
          alias: t3
          children:
            - 73
          id: 74
          output: 78
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 80
    - Expression:
        Row:
          list:
            - 80
          distribution: ~
    - Expression:
        Constant:
          value:
            Number: 1
    - Expression:
        Bool:
          left: 81
          op: Eq
          right: 82
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 80
    - Expression:
        Row:
          list:
            - 84
          distribution: ~
    - Expression:
        Constant:
          value:
            Number: 2
    - Expression:
        Bool:
          left: 85
          op: Eq
          right: 86
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 80
    - Expression:
        Row:
          list:
            - 88
          distribution: ~
    - Expression:
        Constant:
          value:
            Number: 3
    - Expression:
        Bool:
          left: 89
          op: Eq
          right: 90
    - Expression:
        Bool:
          left: 87
          op: Or
          right: 91
    - Expression:
        Bool:
          left: 83
          op: Or
          right: 92
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 80
    - Expression:
        Row:
          list:
            - 94
          distribution: ~
    - Expression:
        Constant:
          value:
            String: "1"
    - Expression:
        Bool:
          left: 95
          op: Eq
          right: 96
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 80
    - Expression:
        Row:
          list:
            - 98
          distribution: ~
    - Expression:
        Constant:
          value:
            String: "2"
    - Expression:
        Bool:
          left: 99
          op: Eq
          right: 100
    - Expression:
        Bool:
          left: 97
          op: Or
          right: 101
    - Expression:
        Bool:
          left: 93
          op: And
          right: 102
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 80
    - Expression:
        Alias:
          name: identification_number
          child: 104
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 80
    - Expression:
        Alias:
          name: product_code
          child: 106
    - Expression:
        Row:
          list:
            - 105
            - 107
          distribution: ~
    - Relational:
        Selection:
          children:
            - 79
          filter: 103
          id: 80
          output: 108
    - Expression:
        Reference:
          targets:
            - 0
          position: 0
          parent: 110
    - Expression:
        Alias:
          name: identification_number
          child: 110
    - Expression:
        Reference:
          targets:
            - 0
          position: 1
          parent: 110
    - Expression:
        Alias:
          name: product_code
          child: 112
    - Expression:
        Row:
          list:
            - 111
            - 113
          distribution: ~
    - Relational:
        Projection:
          children:
            - 109
          id: 110
          output: 114
relations:
  hash_testing:
    Segment:
      columns:
        - name: identification_number
          type: integer
        - name: product_code
          type: string
        - name: product_units
          type: boolean
        - name: sys_op
          type: number
        - name: bucket_id
          type: unsigned
      key:
        positions:
          - 0
          - 1
      name: hash_testing
  hash_testing_hist:
    Segment:
      columns:
        - name: identification_number
          type: integer
        - name: product_code
          type: string
        - name: product_units
          type: boolean
        - name: sys_op
          type: number
        - name: bucket_id
          type: unsigned
      key:
        positions:
          - 0
          - 1
      name: hash_testing_hist
slices: ~
top: 115
